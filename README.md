# Source Code Viewer PHP

# 概要

・PHP + GeSHi で書かれた、ソースコードビューワー CGI（サーバーサイド）です。

・Linuxサーバー上の各種プロジェクトのソースコードを言語ごとにシンタックスハイライト
の色分けで表示することが出来ます。

・一応検索も可能です。

-----------------------------------------------------
# 設置方法:

・まず、Apache2 ＋ PHP8 が稼働している Linuxサーバー環境があるものとします。

・例示として、このPHPプログラムを
  /var/www/html/pub/viewer/ 
  に展開してください。

・次に、閲覧させたい各種プロジェクトのルートディレクトリを設定します。
  例示として、
  /var/www/html/pub/Src/
  ディレクトリを作成して、その下に
    ＜プロジェクト名＞/＜プロジェクトのファイル（ディレクトリ含む）＞
  を配置します。
    ＜プロジェクト名＞　のディレクトリは、シンボリックリンクでも大丈夫です。

・設置したら、適当なブラウザでアクセスします。

-----------------------------------------------------
# 使い方:
・例示として、
  http://サイトURL/pub/viwer/v.php にアクセスします。


画面上に、以下のような表示が出ます。
================================================================
□一覧  /プロジェクト名/サブディレクトリ/ファイル名/  ［ 検索窓 ］
================================================================
その下に、プロジェクト一覧が出ますので、クリックして辿ってください。



-----------------------
□一覧   ボタンの使い方
-----------------------

   □   ・・・ プロジェクト一覧に戻ります。
   一覧 ・・・ プロジェクト内のファイル一覧に戻ります。
   /プロジェクト名/サブディレクトリ/ファイル名/ ・・・　どれかをクリックすると
　　　　　　　　そのディレクトリに移動します。

   
-----------------------------------------------------
# その他の機能

・pandoc がLinuxにインストールされている場合は、
拡張子 .md のファイルのビューワーとしてpandoc が使われます。

・ソースコード表示時の行番号にはすべてアンカーが付いていますので、
Pukiwiki等に行番号のリンク先を貼ることによって、ポインタとして使用できます。

・githubに同じソースが存在していて、リンクが欲しい場合は、config.php の
  $git_url にgithubへのリンクURLを記述すると、そこへ参照するためのボタン
　が現れるようになっていますが、おそらく多少の調整等が必要かもしれません。


-----------------------------------------------------
# ライセンス：

 GeSHi に全面的に依存しているので、 GeSHi のライセンスに準じます。

（このリポジトリは GeSHi を含んでいます）

なお、PHP8に対応するために、GeSHiのソースに僅か数行の修正を加えさせていただきました

//PHP7.4 Deprecated.
//              $callback_2 = create_function('$matches', 'return "[" . str_replace("|", "", $matches[1]) . "]";');
                $callback_2 = function($matches) {
					return "[" . str_replace("|", "", $matches[1]) . "]" ;
				};

